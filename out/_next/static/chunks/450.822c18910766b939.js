"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{96450:function(e,t,n){n.r(t),n.d(t,{MetamaskAdapter:function(){return J}});var r,a,o=n(15861),i=n(15671),c=n(43144),s=n(97326),l=n(73237),u=n(60136),h=n(82963),p=n(61120),d=n(4942),f=n(64687),m=n.n(f),v=n(92003),y=n.n(v),k=n(64049),E=n(13631),g=n(20917),N=n(96245),C=n(2043),w=n.n(C),b={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},O=function(e){if(e===b.EIP155||e===b.SOLANA)return 1;throw Error("Chain namespace ".concat(e," is not supported"))},T=function(e){var t=b.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},x=function(e){var t=b.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},Z=function(e,t){if(e===b.OTHER)return null;var n=t?"number"==typeof t?t:parseInt(t,16):O(e);return e===b.EIP155?T(n):e===b.SOLANA?x(n):null};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,h.Z)(this,n)}}var I=function(e){(0,u.Z)(n,e);var t=A(n);function n(e,r){var a;return(0,i.Z)(this,n),a=t.call(this,r),(0,d.Z)((0,s.Z)(a),"code",void 0),(0,d.Z)((0,s.Z)(a),"message",void 0),a.code=e,a.message=r||"",Object.defineProperty((0,s.Z)(a),"name",{value:"Web3AuthError"}),a}return(0,c.Z)(n,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),n}(E.s),R=function(e){(0,u.Z)(n,e);var t=A(n);function n(e,r){var a;return(0,i.Z)(this,n),a=t.call(this,e,r),Object.defineProperty((0,s.Z)(a),"name",{value:"WalletInitializationError"}),a}return(0,c.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5013,e)}}]),n}(I);(0,d.Z)(R,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var P=function(e){(0,u.Z)(n,e);var t=A(n);function n(e,r){var a;return(0,i.Z)(this,n),a=t.call(this,e,r),Object.defineProperty((0,s.Z)(a),"name",{value:"WalletLoginError"}),a}return(0,c.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5114,e)}}]),n}(I);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(0,d.Z)(P,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var _={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},L=D({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},_),M=D({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},_),j=D(D({},M),L);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},q=W(W({},Y),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),F=function(e){(0,u.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(r);if(t){var a=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function r(){var e;(0,i.Z)(this,r);for(var t=arguments.length,a=Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),(0,d.Z)((0,s.Z)(e),"adapterData",{}),(0,d.Z)((0,s.Z)(e),"sessionTime",86400),(0,d.Z)((0,s.Z)(e),"chainConfig",null),e}return(0,c.Z)(r,[{key:"chainConfigProxy",get:function(){return this.chainConfig?W({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==Y.READY){if(!e.chainNamespace)throw R.notReady("ChainNamespace is required while setting chainConfig");var t=Z(e.chainNamespace,e.chainId);this.chainConfig=W(W({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==j.WALLET_CONNECT_V1||this.status!==Y.CONNECTING){if(this.status===Y.CONNECTING)throw R.notReady("Already connecting");if(this.status===Y.CONNECTED)throw P.connectionError("Already connected");if(this.status!==Y.READY)throw P.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw P.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==Y.NOT_READY){if(this.status===Y.CONNECTED)throw R.notReady("Already connected");if(this.status===Y.READY)throw R.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(q.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),r}(k.Ue),U="https://authjs.web3auth.io",H=w().getLogger("web3auth-logger");function K(e){var t,n=!1,r=0;try{t=window[e],n=!0,r=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return!!(e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&n&&0!==r)}}var G=function(e){var t=(0,N.Z)(e);return!!(!t.exp||t.exp<Math.floor(Date.now()/1e3))},z=(r=(0,o.Z)(m().mark(function e(t,n){var r,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={payload:t,header:{t:"solana"===n?"sip99":"eip191"},network:"solana"===n?"solana":"ethereum"},e.next=6,(0,g.v_)("".concat(U,"/siww/get"),r);case 6:if((a=e.sent).success){e.next=9;break}throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),V=(a=(0,o.Z)(m().mark(function e(t,n,r,a,o,i){var c,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c={signature:{s:n,t:"solana"===t?"sip99":"eip191"},message:r,issuer:a,audience:window.location.hostname,timeout:o},e.next=4,(0,g.v_)("".concat(U,"/siww/verify"),c,{headers:{client_id:i,wallet_provider:a}});case 4:if((s=e.sent).success){e.next=8;break}throw H.error("Failed to authenticate user, ,message verification failed",s.error),Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",s.token);case 9:case"end":return e.stop()}},e)})),function(e,t,n,r,o,i){return a.apply(this,arguments)}),J=function(e){(0,u.Z)(E,e);var t,n,r,a,f,v,k=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(E);if(t){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function E(e){var t;return(0,i.Z)(this,E),t=k.call(this,e),(0,d.Z)((0,s.Z)(t),"adapterNamespace","eip155"),(0,d.Z)((0,s.Z)(t),"currentChainNamespace",b.EIP155),(0,d.Z)((0,s.Z)(t),"type","external"),(0,d.Z)((0,s.Z)(t),"name",j.METAMASK),(0,d.Z)((0,s.Z)(t),"status",Y.NOT_READY),(0,d.Z)((0,s.Z)(t),"rehydrated",!1),(0,d.Z)((0,s.Z)(t),"metamaskProvider",null),t.chainConfig=(null==e?void 0:e.chainConfig)||null,t.sessionTime=(null==e?void 0:e.sessionTime)||86400,t}return(0,c.Z)(E,[{key:"provider",get:function(){return this.status===Y.CONNECTED&&this.metamaskProvider?this.metamaskProvider:null},set:function(e){throw Error("Not implemented")}},{key:"init",value:(n=(0,o.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.Z)((0,p.Z)(E.prototype),"checkInitializationRequirements",this).call(this),e.next=3,y()({mustBeMetaMask:!0});case 3:if(this.metamaskProvider=e.sent,this.metamaskProvider){e.next=6;break}throw R.notInstalled("Metamask extension is not installed");case 6:if(this.status=Y.READY,this.emit(q.READY,j.METAMASK),e.prev=8,H.debug("initializing metamask adapter"),!t.autoConnect){e.next=14;break}return this.rehydrated=!0,e.next=14,this.connect();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),this.emit(q.ERRORED,e.t0);case 19:case"end":return e.stop()}},e,this,[[8,16]])})),function(e){return n.apply(this,arguments)})},{key:"setAdapterSettings",value:function(e){this.status!==Y.READY&&(null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId))}},{key:"connect",value:(r=(0,o.Z)(m().mark(function e(){var t=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.Z)((0,p.Z)(E.prototype),"checkConnectionRequirements",this).call(this),this.chainConfig||(this.chainConfig=Z(b.EIP155,1)),this.status=Y.CONNECTING,this.emit(q.CONNECTING,{adapter:j.METAMASK}),this.metamaskProvider){e.next=6;break}throw P.notConnectedError("Not able to connect with metamask");case 6:return e.prev=6,e.next=9,this.metamaskProvider.request({method:"eth_requestAccounts"});case 9:if(!(this.metamaskProvider.chainId!==this.chainConfig.chainId)){e.next=13;break}return e.next=13,this.switchChain(this.chainConfig);case 13:if(this.status=Y.CONNECTED,this.provider){e.next=16;break}throw P.notConnectedError("Failed to connect with provider");case 16:return this.provider.once("disconnect",function(){t.disconnect()}),this.emit(q.CONNECTED,{adapter:j.METAMASK,reconnected:this.rehydrated}),e.abrupt("return",this.provider);case 21:throw e.prev=21,e.t0=e.catch(6),this.status=Y.READY,this.rehydrated=!1,this.emit(q.ERRORED,e.t0),P.connectionError("Failed to login with metamask wallet");case 27:case"end":return e.stop()}},e,this,[[6,21]])})),function(){return r.apply(this,arguments)})},{key:"disconnect",value:(a=(0,o.Z)(m().mark(function e(){var t,n,r=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1},e.next=3,(0,l.Z)((0,p.Z)(E.prototype),"disconnect",this).call(this);case 3:null===(t=this.provider)||void 0===t||t.removeAllListeners(),n.cleanup?(this.status=Y.NOT_READY,this.metamaskProvider=null):this.status=Y.READY,this.rehydrated=!1,this.emit(q.DISCONNECTED);case 7:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"getUserInfo",value:(f=(0,o.Z)(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.status!==Y.CONNECTED)){e.next=2;break}throw P.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"switchChain",value:(v=(0,o.Z)(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.metamaskProvider){e.next=2;break}throw P.notConnectedError("Not connected with wallet");case 2:return e.prev=2,e.next=5,this.metamaskProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:t.chainId}]});case 5:case 12:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),4902!==e.t0.code){e.next=14;break}return e.next=12,this.metamaskProvider.request({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:t.displayName,rpcUrls:[t.rpcTarget]}]});case 14:throw e.t0;case 15:case"end":return e.stop()}},e,this,[[2,7]])})),function(e){return v.apply(this,arguments)})}]),E}(function(e){(0,u.Z)(l,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.Z)(l);if(t){var r=(0,p.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,h.Z)(this,e)});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,l),e=a.call(this),(0,d.Z)((0,s.Z)(e),"clientId",void 0),e.clientId=t.clientId,e}return(0,c.Z)(l,[{key:"authenticateUser",value:(n=(0,o.Z)(m().mark(function e(){var t,n,r,a,o,i,c,s,l,u;return m().wrap(function(e){for(var h,p,d,f;;)switch(e.prev=e.next){case 0:if(!(!this.provider||!(null!==(t=this.chainConfig)&&void 0!==t&&t.chainId))){e.next=2;break}throw P.notConnectedError();case 2:if(r=(n=this.chainConfig).chainNamespace,a=n.chainId,!(this.status!==Y.CONNECTED)){e.next=5;break}throw P.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((o=e.sent)&&o.length>0)){e.next=26;break}if(h=o[0],p=this.name,!(i=K("localStorage")?localStorage.getItem("".concat(h.toLowerCase(),"_").concat(p)):null)||G(i)){e.next=14;break}return e.abrupt("return",{idToken:i});case 14:return c={domain:window.location.origin,uri:window.location.href,address:o[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},e.next=17,z(c,r);case 17:return s=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[s,o[0]]});case 20:return l=e.sent,e.next=23,V(r,l,s,this.name,this.sessionTime,this.clientId);case 23:return u=e.sent,d=o[0],f=this.name,K("localStorage")&&localStorage.setItem("".concat(d.toLowerCase(),"_").concat(f),u),e.abrupt("return",{idToken:u});case 26:throw P.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"disconnect",value:(r=(0,o.Z)(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.status!==Y.CONNECTED)){e.next=2;break}throw P.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:if((t=e.sent)&&t.length>0){var n,r;n=t[0],r=this.name,K("localStorage")&&localStorage.removeItem("".concat(n.toLowerCase(),"_").concat(r))}case 6:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]),l}(F))}}]);